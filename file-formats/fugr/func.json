{
  "$schema": "http://json-schema.org/draft/2019-09/schema#",
  "$id": "http://github.com/SAP/abap-file-formats/file-formats/fugr/func.json",
  "type": "object",
  "properties": {
    "header": {
      "title": "Header",
      "type": "object",
      "properties": {
        "$schema": {
          "title": "Schema",
          "description": "Format version",
          "type": "string"
        },
        "description": {
          "title": "Description",
          "description": "Description of a function module",
          "type": "string",
          "maxLength": 74
        }
      },
      "additionalProperties": false,
      "required": [
        "$schema",
        "description"
      ]
    },
    "processingType": {
      "title": "Processing Type",
      "description": "Processing Type",
      "type": "string",
      "enum": [
        "normal",
        "rfc",
        "update"
      ],
      "enumDescriptions": [
        "Normal",
        "RFC",
        "Update"
      ]
    },
    "rfcFields": {
      "title": "RFC specific fields",
      "description": "Specific fields for rfc function modules",
      "type": "object",
      "properties": {
        "basXmlEnabled": {
          "title": "basXml enabled",
          "description": "When this indicator is set, the developer of the function module shows that the function module for the classic RFC protocol and the basXML protocol behaves in the same way, from a semantic point of view",
          "type": "boolean"
        },
        "rfcScope": {
          "title": "RFC Scope",
          "description": "Indicates the scope of function module calls. Modules whose call scope is not defined explicitly can be called from anywhere.",
          "type": "string",
          "enum": [
            "fromSameClientAndUser",
            "fromSameSystem",
            "fromAnySystem",
            "notClassified"
          ],
          "enumDescriptions": [
            "From same client and user",
            "From same system",
            "From any system",
            "Not classified"
          ]
        },
        "rfcVersion": {
          "title": "RFC Version",
          "description": "Indicates which serializations are permitted for the function module. Among other things, the selected serializations determine where the function module can be enhanced.",
          "type": "string",
          "enum": [
            "fastSerializationRequired",
            "any"
          ],
          "enumDescriptions": [
            "Fast Serialization Required",
            "Any"
          ]
        },
        "abapFromJava": { 
        "title": "Abap from java",
        "description": "Abap from java",
        "type": "boolean"
        },
        "javaFromAbap": { 
        "title": "Java from abap",
        "description": "Java from abap",
        "type": "boolean"
        },
        "javaRemote": { 
        "title": "Java remote",
        "description": "Java remote",
        "type": "boolean"
        }
      },
      "additionalProperties": false,
      "required": [
        "basXmlEnabled",
        "rfcScope",
        "rfcVersion",
        "abapFromJava",
        "javaFromAbap",
        "javaRemote"
      ]
    },
    "updateFields": {
      "title": "Update specific fields",
      "description": "Specific fields for update function modules",
      "type": "object",
      "properties": {
        "updateTaskKind": {
          "title": "Update task kind",
          "description": "Update task kind",
          "type": "string",
          "enum": [
            "startImmediate",
            "startDelayed",
            "immediateStartNoRestart",
            "collectiveRun",
            "unsupportedKind",
            "none"
          ],
          "enumDescriptions": [
            "Start immediate",
            "Start delayed",
            "Immediate start no restart",
            "Collective run",
            "Unsupported kind",
            "none"
          ]
        }
      },
      "additionalProperties": false,
      "required": [
        "updateTaskKind"
      ]
    },
    "releaseState": {
      "title": "Release state",
      "description": "Release state",
      "type": "string",
      "enum": [
        "external",
        "internal",
        "obsolete",
        "markedForRelease"
      ],
      "enumDescriptions": [
        "External",
        "Internal",
        "Obsolete",
        "Marked for release"
      ]
    },
    "releaseDate": {
      "title": "Release date",
      "description": "Release date",
      "type": "date"
    },
    "global": { 
      "title": "Global",
      "description": "The parameters of this function module are global visible within the function group",
      "type": "boolean"
    },
    "exceptionClasses": {
      "title": "Exception classes",
      "description": "Exception classes",
      "type": "boolean"
    },
    "application": {
      "title": "Application",
      "description": "Application",
      "type": "string"
    },
    "client": {
      "title": "Client",
      "description": "Client",
      "type": "string"
    },
    "host": {
      "title": "Host",
      "description": "Host",
      "type": "string"
    },
    "includeNumber": {
      "title": "Include number",
      "description": "Include number",
      "type": "string"
    },
    "notExecutable": {
      "title": "Function module is not executable",
      "description": "If this flag is set, the function module cannot be called. It is deactivated in the function group",
      "type": "boolean"
    },
    "editLocked": {
      "title": "Edit-locked",
      "description": "The function module is not editable",
      "type": "boolean"
    },
    "parameters": {
      "title": "Parameter descriptions",
      "description": "Parameter descriptions of the function module",
      "type": "array",
      "items": {
        "title": "Parameter",
        "description": "Parameter with name and description",
        "type": "object",
        "properties": {
          "name": {
            "title": "Parameter name",
            "description": "Name of the parameter",
            "type": "string",
            "maxLength": 30
          },
          "description": {
            "title": "Parameter description",
            "description": "Description of the parameter",
            "type": "string",
            "maxLength": 79
          }
        },
        "additionalProperties": false,
        "required": [
          "name",
          "description"
        ]
      }
    },
    "exceptions": {
      "title": "Exception descriptions",
      "description": "Exception descriptions of the function module",
      "type": "array",
      "items": {
        "title": "Exception",
        "description": "Exception with name and description",
        "type": "object",
        "properties": {
          "name": {
            "title": "Exception name",
            "description": "Name of the exception",
            "type": "string",
            "maxLength": 30
          },
          "description": {
            "title": "Exception description",
            "description": "Description of the exception",
            "type": "string",
            "maxLength": 79
          }
        },
        "additionalProperties": false,
        "required": [
          "name",
          "description"
        ]
      }
    }
  },
  "if": {
    "processingType": {
      "const": "rfc"
    }
  },
  "then": {
    "required": [
      "rfcFields"
    ]
  },
  "if": {
    "processingType": {
      "const": "update"
    }
  },
  "then": {
    "required": [
      "updateFields"
    ]
  },
  "additionalProperties": false,
  "required": [
    "processingType",
    "releaseState",
    "global",
    "exceptionClasses",
    "includeNumber",
    "notExecutable"
  ]
}
