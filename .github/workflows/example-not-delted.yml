name: Don't delete examples

on:
  pull_request:

permissions:
  contents: read

jobs:
  build:
    # Name the Job
    name: Don't delete examples, when increasing format version

    runs-on: ubuntu-latest

    timeout-minutes: 10

    steps:
    - uses: actions/checkout@v4
    - name: Get deleted files
      id: changed-files
      uses: tj-actions/changed-files@v44

    - name: List all deleted files
      env:
        ALL_DELETED_FILES: ${{ steps.changed-files.outputs.deleted_files }}
      run: |
        for file in ${ALL_DELETED_FILES}; do
          echo "$file was deleted"
        done

    - name: Fail if there are deleted files
      run: |
        set +e
        if [[ -n "${{ env.ALL_DELETED_FILES }}" ]]; then
            echo "There are deleted files"
            exit 1
        fi
